
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Structural Optimization of a wingbox &#8212; TUDuam  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/structural_optimization';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Structural Optimization" href="../structural_opt.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">TUDuam  documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../data_structures.html">
                        Data Structures
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../structures.html">
                        Structures subpackage
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../propulsion.html">
                        Propulsion
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../aerodynamics.html">
                        Aerodynamics
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../performance.html">
                        Performance
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../mass_metric.html">
                        Mass Metrics
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../airfoil_data.html">
                        Airfoil data generation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../propulsion_notebook.html">
                        Propulsion Notebook
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../structural_analysis.html">
                        Structural Analysis
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link dropdown-item nav-internal" href="../structural_opt.html">
                        Structural Optimization
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../data_structures.html">
                        Data Structures
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../structures.html">
                        Structures subpackage
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../propulsion.html">
                        Propulsion
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../aerodynamics.html">
                        Aerodynamics
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../performance.html">
                        Performance
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links-2">
                    More
                </button>
                <ul id="pst-nav-more-links-2" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../mass_metric.html">
                        Mass Metrics
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../airfoil_data.html">
                        Airfoil data generation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../propulsion_notebook.html">
                        Propulsion Notebook
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../structural_analysis.html">
                        Structural Analysis
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link dropdown-item nav-internal" href="../structural_opt.html">
                        Structural Optimization
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Structural Optimization of a wingbox</a></li>









</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../structural_opt.html" class="nav-link">Structural Optimization</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Structural...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="structural-optimization-of-a-wingbox">
<h1>Structural Optimization of a wingbox<a class="headerlink" href="#structural-optimization-of-a-wingbox" title="Link to this heading">#</a></h1>
<p>In the previous notebook we have seen the structural analysis of a single wingbox cell. We would like however to use these tools to optimize the various parameters of the wingbox in order to minimize the weight of the structure. In order to do so let’s remind ourselves what exactly we can change in order to improve the performance of this wingbox.</p>
<p>In the previous notebook we had defined the following parameters in order to perform the analysis.</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(n_{cell}\)</span>    - Number of cells</p></li>
<li><p><span class="math notranslate nohighlight">\(\text{loc}_{sp}\)</span>    - The location of the spars</p></li>
<li><p><span class="math notranslate nohighlight">\(t_{sk}\)</span>      - The thickness of the skin in each cell</p></li>
<li><p><span class="math notranslate nohighlight">\(A_{str}\)</span>     - The area of the stringers</p></li>
<li><p><span class="math notranslate nohighlight">\(t_{sp}\)</span>      -  The thickness of the spars</p></li>
<li><p><span class="math notranslate nohighlight">\(n_{str}\)</span>     - The amount of stringers per cell</p></li>
</ul>
<p>These variables were then loaded in the API data structure as shown below:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">attr_dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s">&quot;n_cell&quot;</span><span class="o">:</span><span class="mi">4</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;spar_loc_nondim&quot;</span><span class="o">:</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7</span><span class="p">],</span>
<span class="w">    </span><span class="s">&quot;t_sk_cell&quot;</span><span class="o">:</span><span class="p">[</span><span class="mf">0.002</span><span class="p">,</span><span class="mf">0.004</span><span class="p">,</span><span class="mf">0.004</span><span class="p">,</span><span class="w"> </span><span class="mf">0.004</span><span class="p">],</span>
<span class="w">    </span><span class="s">&quot;area_str&quot;</span><span class="o">:</span><span class="mf">20e-6</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;t_sp&quot;</span><span class="o">:</span><span class="mf">0.008</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;str_cell&quot;</span><span class="o">:</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">wingbox_struct</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tud</span><span class="p">.</span><span class="n">Wingbox</span><span class="p">(</span><span class="o">**</span><span class="n">attr_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>However, there will be one major change. For the structural analysis of a wingbox only the stringer area is relevant however for the constraints the geometry of said stringers is also important as you will see further up in this notebook.</p>
<p>So in the optimization of the wingbox we wil add the stringer height, width and thickness to the optimization parameters.</p>
<p>The parameters which we will optimize for are the skin thickness in each cell, the area of the stringers, the thickness of the spars and finally the stringer of the cell. This leaves the amount of cells, the spar locations and the bay length to be decided by the designers. The reasoning behind this is that usually your rib and spar locations are constrained the  placement of other systems in the wing such as the flap and slat mechanism. Below a summary can be found of the fixed and optimization parameters:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Optimiziation Parameters</strong></p></th>
<th class="head"><p><strong>Fixed Parameters</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Skin thickness in each cell</p></td>
<td><p>The amount of cells</p></td>
</tr>
<tr class="row-odd"><td><p>Stringer width</p></td>
<td><p>Spar locations</p></td>
</tr>
<tr class="row-even"><td><p>Stringer height</p></td>
<td><p>Bay length</p></td>
</tr>
<tr class="row-odd"><td><p>Stringer thickness</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Spar thickness</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>The amount of stringers in each cell</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="laying-out-a-framework-for-a-full-wing-optimization">
<h1>Laying out a framework for a full wing optimization<a class="headerlink" href="#laying-out-a-framework-for-a-full-wing-optimization" title="Link to this heading">#</a></h1>
<p>In order define our constraints later on we will have to divide the wing in sections called bays. Each bay is enclosed by two ribs, thus the length of these bays is for the designer to decide. Once, a bay is defined, we can further split this up in a collection of flat sheets. Where each sheet is in turn enclosed by stringers. The boundary conditions for these stringers have been decided to be simply supported. In <a class="reference internal" href="#figure1"><span class="xref myst">figure 1</span></a> we can see the result of the partitioning that was just described. Although we will not model the effects of taper (Future implementation).</p>
<br>
<p align="left"  id="figure1" >
<img src="https://github.com/saullocastro/tuduam/blob/main/doc/_static/wing_bay_sheet.png?raw=true" width="600" />
 <br>
</p>
<p align="left">
<em>Figure 1: Wing modeled as a combination of simply supported sheets and simply supported bays. Figure taken from T.H.G Megson, Aircraft  Structures For Engineering Students</em>
</p>
<br>
<p>Now that our wing has been divided into bays, and the bays respectively into sheets we can limit the scope of the optimization. Instead, of optimizing for the entire wing simultaneously we will optimize each bay. In <a class="reference internal" href="#figure2"><span class="xref myst">figure 2</span></a> an overview is found on how the optimization in this notebook will tackle the sizing of the structural members in the wing.</p>
<br>
<p align="left"  id="figure2" >
<img src="https://raw.githubusercontent.com/saullocastro/tuduam/6e2a96b1fd444969175b2b61de6eb1fc9b94a9d5/doc/_static/Optimization_procedure.svg" width="600" style="background-color: white;"/>
 <br>
</p>
<p align="left">
<em>Figure 2: An overview of the optimization procedure for an entire wing.  </em>
</p>
<br>
<p>The following sections will now enclose how to optimize a single one of these bays, starting with constraining the design space.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="constraining-the-design">
<h1>Constraining the design<a class="headerlink" href="#constraining-the-design" title="Link to this heading">#</a></h1>
<p>During the optimization it is important we set the minimum constraints the design should meet. Otherwise, the optimum solution would be no wingbox at all. For the API documentation of all these constraints please visit <a class="reference external" href="https://saullocastro.github.io/tuduam/constraints.html">constraints documentation</a>. We’ll cover the most important ones in this document and link to the documentation for the remainder of the constraints.</p>
<section id="buckling">
<h2>Buckling<a class="headerlink" href="#buckling" title="Link to this heading">#</a></h2>
<p>As previously discussed, a section of the wingbox is divided up in plates. Knowing these plates are simply supported we can compute the critical instability in both shear and compression using  equations 1 and 2, respectively:</p>
<div class="math notranslate nohighlight">
\[
\tag{1}
\sigma_{cr} = k_b  \frac{pi^2 E}{12(1 - \nu)} \left(\frac{t_{sk}}{b}\right)^2
\]</div>
<div class="math notranslate nohighlight">
\[
\tag{2}
\sigma_{cr} = k_c  \frac{pi^2 E}{12(1 - \nu)} \left(\frac{t_{sk}}{b}\right)^2
\]</div>
<p>For the specifics on <span class="math notranslate nohighlight">\(k_b\)</span> and <span class="math notranslate nohighlight">\(k_c\)</span>, please review the <a class="reference external" href="https://saullocastro.github.io/tuduam/">API documentation</a>.</p>
<p>Whilst, we could simply apply them individually these two critical loads are not independent from each other. In increased shear loading, decreases the compression capability of the sheet. Hence, we use an interaction curve as described in equation 3.</p>
<div class="math notranslate nohighlight">
\[
\tag{3}
\frac{N_x}{N_{x,crit}} + \left(\frac{N_{xy}}{N_{xy,crit}}\right)^2 &lt; 1
\]</div>
<p>In equation 3, <span class="math notranslate nohighlight">\(N_{x,crit}\)</span> is computed with equation 2 and <span class="math notranslate nohighlight">\(N_{xy,crit}\)</span> with equation 1. <span class="math notranslate nohighlight">\(N_x\)</span> and <span class="math notranslate nohighlight">\(N_{xy}\)</span> are the loads specified by the user.</p>
<p>Finally, we also constrain the design using global skin buckling as a stiffened panel can also buckle as a whole.
In this case, the width of the panel is utilized instead of the stringer pitch, and simply supported conditions
can be assumed. The contribution of the stringers that still provide a stiffening effect can be considered by
smearing their thickness to the skin thickness, as in Equation 47.</p>
<div class="math notranslate nohighlight">
\[
\tag{47}
t_{smeared} = \frac{t_{sk} \cdot b + N_{str} \cdot A_{st}}{b}
\]</div>
<p>The smeared thickness is substituted in the equation for critical sheet compression.
The constraint is expressed below.</p>
<div class="math notranslate nohighlight">
\[
\sigma_{cr,glob} - \sigma_{cr,loc} \geq 0
\]</div>
</section>
<section id="von-mises-failure-criterion">
<h2>Von Mises failure Criterion<a class="headerlink" href="#von-mises-failure-criterion" title="Link to this heading">#</a></h2>
<p>Besides buckling we also do not want the wingbox to yield. Hence we also apply the von Mises yield criterion. Considering the direct stresses and plane stresses that occur in the wingbox we can derive equation 4.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\sigma_y &amp; \geq  \sigma_v \\
\tag{4}
\sigma_y    &amp; \geq  \sqrt{\sigma_{11}^2 + 3\tau^2} \\
\end{align*}
\end{split}\]</div>
<p>Abiding by this constraint ensures that the wingbox does not yield under the expected loads.</p>
</section>
<section id="other-constraints">
<h2>Other constraints<a class="headerlink" href="#other-constraints" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://saullocastro.github.io/tuduam/constraints.html#tuduam.structures.constraints.IsotropicWingboxConstraints.column_str_buckling">Column Stringer buckling</a></p></li>
<li><p><a class="reference external" href="https://saullocastro.github.io/tuduam/constraints.html#tuduam.structures.constraints.IsotropicWingboxConstraints.crippling">Crippling</a></p></li>
<li><p><a class="reference external" href="https://saullocastro.github.io/tuduam/constraints.html#tuduam.structures.constraints.IsotropicWingboxConstraints.stringer_flange_buckling">Stringer Flange Buckling</a> (similar to buckling of sheet, except different BC’s)</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="leveraging-python-for-the-optimization">
<h1>Leveraging Python for the optimization<a class="headerlink" href="#leveraging-python-for-the-optimization" title="Link to this heading">#</a></h1>
<p>In order to leverage Python for our optimization, we will first have to install two libraries into the <code class="docutils literal notranslate"><span class="pre">google</span> <span class="pre">collab</span></code> environment. These are <code class="docutils literal notranslate"><span class="pre">tuduam</span></code> and <code class="docutils literal notranslate"><span class="pre">pymoo</span></code>, tuduam is a library specifically tailored for this course and pymoo a library for multi-objective optimization. Please run the code cell below in order to do.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>tuduam
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>pymoo
<span class="o">!</span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/saullocastro/tuduam.git
<span class="c1"># If the following error occurs &quot;fatal: destination path &#39;tuduam&#39; already exists and is not an empty directory.&quot; please continue as your environment is already set up correctly</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Yellow">DEPRECATION: Loading egg at /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg is deprecated. pip 24.3 will enforce this behaviour change. A possible replacement is to use pip for package installation. Discussion can be found at https://github.com/pypa/pip/issues/12330</span>
Requirement already satisfied: tuduam in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg (2024.16)
Requirement already satisfied: numpy in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from tuduam) (1.26.4)
Requirement already satisfied: scipy in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from tuduam) (1.12.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Yellow">DEPRECATION: Loading egg at /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg is deprecated. pip 24.3 will enforce this behaviour change. A possible replacement is to use pip for package installation. Discussion can be found at https://github.com/pypa/pip/issues/12330</span>
Requirement already satisfied: pymoo in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (0.6.1.1)
Requirement already satisfied: numpy&gt;=1.15 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from pymoo) (1.26.4)
Requirement already satisfied: scipy&gt;=1.1 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from pymoo) (1.12.0)
Requirement already satisfied: matplotlib&gt;=3 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from pymoo) (3.9.1)
Requirement already satisfied: autograd&gt;=1.4 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from pymoo) (1.6.2)
Requirement already satisfied: cma==3.2.2 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from pymoo) (3.2.2)
Requirement already satisfied: alive-progress in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from pymoo) (3.1.5)
Requirement already satisfied: dill in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from pymoo) (0.3.8)
Requirement already satisfied: Deprecated in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from pymoo) (1.2.14)
Requirement already satisfied: future&gt;=0.15.2 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from autograd&gt;=1.4-&gt;pymoo) (1.0.0)
Requirement already satisfied: contourpy&gt;=1.0.1 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from matplotlib&gt;=3-&gt;pymoo) (1.2.0)
Requirement already satisfied: cycler&gt;=0.10 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from matplotlib&gt;=3-&gt;pymoo) (0.12.1)
Requirement already satisfied: fonttools&gt;=4.22.0 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from matplotlib&gt;=3-&gt;pymoo) (4.47.2)
Requirement already satisfied: kiwisolver&gt;=1.3.1 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from matplotlib&gt;=3-&gt;pymoo) (1.4.5)
Requirement already satisfied: packaging&gt;=20.0 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from matplotlib&gt;=3-&gt;pymoo) (24.1)
Requirement already satisfied: pillow&gt;=8 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from matplotlib&gt;=3-&gt;pymoo) (10.4.0)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from matplotlib&gt;=3-&gt;pymoo) (3.1.2)
Requirement already satisfied: python-dateutil&gt;=2.7 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from matplotlib&gt;=3-&gt;pymoo) (2.8.2)
Requirement already satisfied: about-time==4.2.1 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from alive-progress-&gt;pymoo) (4.2.1)
Requirement already satisfied: grapheme==0.6.0 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from alive-progress-&gt;pymoo) (0.6.0)
Requirement already satisfied: wrapt&lt;2,&gt;=1.10 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from Deprecated-&gt;pymoo) (1.16.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: six&gt;=1.5 in /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages (from python-dateutil&gt;=2.7-&gt;matplotlib&gt;=3-&gt;pymoo) (1.16.0)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cloning into &#39;tuduam&#39;...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote: Enumerating objects: 1867, done.
remote: Counting objects:   0% (1/442)
remote: Counting objects:   1% (5/442)
remote: Counting objects:   2% (9/442)
remote: Counting objects:   3% (14/442)
remote: Counting objects:   4% (18/442)
remote: Counting objects:   5% (23/442)
remote: Counting objects:   6% (27/442)
remote: Counting objects:   7% (31/442)
remote: Counting objects:   8% (36/442)
remote: Counting objects:   9% (40/442)
remote: Counting objects:  10% (45/442)
remote: Counting objects:  11% (49/442)
remote: Counting objects:  12% (54/442)
remote: Counting objects:  13% (58/442)
remote: Counting objects:  14% (62/442)
remote: Counting objects:  15% (67/442)
remote: Counting objects:  16% (71/442)
remote: Counting objects:  17% (76/442)
remote: Counting objects:  18% (80/442)
remote: Counting objects:  19% (84/442)
remote: Counting objects:  20% (89/442)
remote: Counting objects:  21% (93/442)
remote: Counting objects:  22% (98/442)
remote: Counting objects:  23% (102/442)
remote: Counting objects:  24% (107/442)
remote: Counting objects:  25% (111/442)
remote: Counting objects:  26% (115/442)
remote: Counting objects:  27% (120/442)
remote: Counting objects:  28% (124/442)
remote: Counting objects:  29% (129/442)
remote: Counting objects:  30% (133/442)
remote: Counting objects:  31% (138/442)
remote: Counting objects:  32% (142/442)
remote: Counting objects:  33% (146/442)
remote: Counting objects:  34% (151/442)
remote: Counting objects:  35% (155/442)
remote: Counting objects:  36% (160/442)
remote: Counting objects:  37% (164/442)
remote: Counting objects:  38% (168/442)
remote: Counting objects:  39% (173/442)
remote: Counting objects:  40% (177/442)
remote: Counting objects:  41% (182/442)
remote: Counting objects:  42% (186/442)
remote: Counting objects:  43% (191/442)
remote: Counting objects:  44% (195/442)
remote: Counting objects:  45% (199/442)
remote: Counting objects:  46% (204/442)
remote: Counting objects:  47% (208/442)
remote: Counting objects:  48% (213/442)
remote: Counting objects:  49% (217/442)
remote: Counting objects:  50% (221/442)
remote: Counting objects:  51% (226/442)
remote: Counting objects:  52% (230/442)
remote: Counting objects:  53% (235/442)
remote: Counting objects:  54% (239/442)
remote: Counting objects:  55% (244/442)
remote: Counting objects:  56% (248/442)
remote: Counting objects:  57% (252/442)
remote: Counting objects:  58% (257/442)
remote: Counting objects:  59% (261/442)
remote: Counting objects:  60% (266/442)
remote: Counting objects:  61% (270/442)
remote: Counting objects:  62% (275/442)
remote: Counting objects:  63% (279/442)
remote: Counting objects:  64% (283/442)
remote: Counting objects:  65% (288/442)
remote: Counting objects:  66% (292/442)
remote: Counting objects:  67% (297/442)
remote: Counting objects:  68% (301/442)
remote: Counting objects:  69% (305/442)
remote: Counting objects:  70% (310/442)
remote: Counting objects:  71% (314/442)
remote: Counting objects:  72% (319/442)
remote: Counting objects:  73% (323/442)
remote: Counting objects:  74% (328/442)
remote: Counting objects:  75% (332/442)
remote: Counting objects:  76% (336/442)
remote: Counting objects:  77% (341/442)
remote: Counting objects:  78% (345/442)
remote: Counting objects:  79% (350/442)
remote: Counting objects:  80% (354/442)
remote: Counting objects:  81% (359/442)
remote: Counting objects:  82% (363/442)
remote: Counting objects:  83% (367/442)
remote: Counting objects:  84% (372/442)
remote: Counting objects:  85% (376/442)
remote: Counting objects:  86% (381/442)
remote: Counting objects:  87% (385/442)
remote: Counting objects:  88% (389/442)
remote: Counting objects:  89% (394/442)
remote: Counting objects:  90% (398/442)
remote: Counting objects:  91% (403/442)
remote: Counting objects:  92% (407/442)
remote: Counting objects:  93% (412/442)
remote: Counting objects:  94% (416/442)
remote: Counting objects:  95% (420/442)
remote: Counting objects:  96% (425/442)
remote: Counting objects:  97% (429/442)
remote: Counting objects:  98% (434/442)
remote: Counting objects:  99% (438/442)
remote: Counting objects: 100% (442/442)
remote: Counting objects: 100% (442/442), done.
remote: Compressing objects:   0% (1/261)
remote: Compressing objects:   1% (3/261)
remote: Compressing objects:   2% (6/261)
remote: Compressing objects:   3% (8/261)
remote: Compressing objects:   4% (11/261)
remote: Compressing objects:   5% (14/261)
remote: Compressing objects:   6% (16/261)
remote: Compressing objects:   7% (19/261)
remote: Compressing objects:   8% (21/261)
remote: Compressing objects:   9% (24/261)
remote: Compressing objects:  10% (27/261)
remote: Compressing objects:  11% (29/261)
remote: Compressing objects:  12% (32/261)
remote: Compressing objects:  13% (34/261)
remote: Compressing objects:  14% (37/261)
remote: Compressing objects:  15% (40/261)
remote: Compressing objects:  16% (42/261)
remote: Compressing objects:  17% (45/261)
remote: Compressing objects:  18% (47/261)
remote: Compressing objects:  19% (50/261)
remote: Compressing objects:  20% (53/261)
remote: Compressing objects:  21% (55/261)
remote: Compressing objects:  22% (58/261)
remote: Compressing objects:  23% (61/261)
remote: Compressing objects:  24% (63/261)
remote: Compressing objects:  25% (66/261)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote: Compressing objects:  26% (68/261)
remote: Compressing objects:  27% (71/261)
remote: Compressing objects:  28% (74/261)
remote: Compressing objects:  29% (76/261)
remote: Compressing objects:  30% (79/261)
remote: Compressing objects:  31% (81/261)
remote: Compressing objects:  32% (84/261)
remote: Compressing objects:  33% (87/261)
remote: Compressing objects:  34% (89/261)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote: Compressing objects:  35% (92/261)
remote: Compressing objects:  36% (94/261)
remote: Compressing objects:  37% (97/261)
remote: Compressing objects:  38% (100/261)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote: Compressing objects:  39% (102/261)
remote: Compressing objects:  40% (105/261)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote: Compressing objects:  41% (108/261)
remote: Compressing objects:  42% (110/261)
remote: Compressing objects:  43% (113/261)
remote: Compressing objects:  44% (115/261)
remote: Compressing objects:  45% (118/261)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote: Compressing objects:  46% (121/261)
remote: Compressing objects:  47% (123/261)
remote: Compressing objects:  48% (126/261)
remote: Compressing objects:  49% (128/261)
remote: Compressing objects:  50% (131/261)
remote: Compressing objects:  51% (134/261)
remote: Compressing objects:  52% (136/261)
remote: Compressing objects:  53% (139/261)
remote: Compressing objects:  54% (141/261)
remote: Compressing objects:  55% (144/261)
remote: Compressing objects:  56% (147/261)
remote: Compressing objects:  57% (149/261)
remote: Compressing objects:  58% (152/261)
remote: Compressing objects:  59% (154/261)
remote: Compressing objects:  60% (157/261)
remote: Compressing objects:  61% (160/261)
remote: Compressing objects:  62% (162/261)
remote: Compressing objects:  63% (165/261)
remote: Compressing objects:  64% (168/261)
remote: Compressing objects:  65% (170/261)
remote: Compressing objects:  66% (173/261)
remote: Compressing objects:  67% (175/261)
remote: Compressing objects:  68% (178/261)
remote: Compressing objects:  69% (181/261)
remote: Compressing objects:  70% (183/261)
remote: Compressing objects:  71% (186/261)
remote: Compressing objects:  72% (188/261)
remote: Compressing objects:  73% (191/261)
remote: Compressing objects:  74% (194/261)
remote: Compressing objects:  75% (196/261)
remote: Compressing objects:  76% (199/261)
remote: Compressing objects:  77% (201/261)
remote: Compressing objects:  78% (204/261)
remote: Compressing objects:  79% (207/261)
remote: Compressing objects:  80% (209/261)
remote: Compressing objects:  81% (212/261)
remote: Compressing objects:  82% (215/261)
remote: Compressing objects:  83% (217/261)
remote: Compressing objects:  84% (220/261)
remote: Compressing objects:  85% (222/261)
remote: Compressing objects:  86% (225/261)
remote: Compressing objects:  87% (228/261)
remote: Compressing objects:  88% (230/261)
remote: Compressing objects:  89% (233/261)
remote: Compressing objects:  90% (235/261)
remote: Compressing objects:  91% (238/261)
remote: Compressing objects:  92% (241/261)
remote: Compressing objects:  93% (243/261)
remote: Compressing objects:  94% (246/261)
remote: Compressing objects:  95% (248/261)
remote: Compressing objects:  96% (251/261)
remote: Compressing objects:  97% (254/261)
remote: Compressing objects:  98% (256/261)
remote: Compressing objects:  99% (259/261)
remote: Compressing objects: 100% (261/261)
remote: Compressing objects: 100% (261/261), done.
Receiving objects:   0% (1/1867)
Receiving objects:   1% (19/1867)
Receiving objects:   2% (38/1867)
Receiving objects:   3% (57/1867)
Receiving objects:   4% (75/1867)
Receiving objects:   5% (94/1867)
Receiving objects:   6% (113/1867)
Receiving objects:   7% (131/1867)
Receiving objects:   8% (150/1867)
Receiving objects:   9% (169/1867)
Receiving objects:  10% (187/1867)
Receiving objects:  11% (206/1867)
Receiving objects:  12% (225/1867)
Receiving objects:  13% (243/1867)
Receiving objects:  14% (262/1867)
Receiving objects:  15% (281/1867)
Receiving objects:  16% (299/1867)
Receiving objects:  17% (318/1867)
Receiving objects:  18% (337/1867)
Receiving objects:  19% (355/1867)
Receiving objects:  20% (374/1867)
Receiving objects:  21% (393/1867)
Receiving objects:  22% (411/1867)
Receiving objects:  23% (430/1867)
Receiving objects:  24% (449/1867)
Receiving objects:  25% (467/1867)
Receiving objects:  26% (486/1867)
Receiving objects:  27% (505/1867)
Receiving objects:  28% (523/1867)
Receiving objects:  29% (542/1867)
Receiving objects:  30% (561/1867)
Receiving objects:  31% (579/1867)
Receiving objects:  32% (598/1867)
Receiving objects:  33% (617/1867)
Receiving objects:  34% (635/1867)
Receiving objects:  35% (654/1867)
Receiving objects:  36% (673/1867)
Receiving objects:  37% (691/1867)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Receiving objects:  38% (710/1867)
Receiving objects:  39% (729/1867)
Receiving objects:  40% (747/1867)
Receiving objects:  41% (766/1867)
Receiving objects:  42% (785/1867)
Receiving objects:  43% (803/1867)
Receiving objects:  44% (822/1867)
Receiving objects:  45% (841/1867)
Receiving objects:  46% (859/1867)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Receiving objects:  47% (878/1867)
Receiving objects:  48% (897/1867)
Receiving objects:  49% (915/1867)
Receiving objects:  50% (934/1867)
Receiving objects:  51% (953/1867)
Receiving objects:  52% (971/1867)
Receiving objects:  53% (990/1867)
Receiving objects:  54% (1009/1867)
Receiving objects:  55% (1027/1867)
Receiving objects:  56% (1046/1867)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Receiving objects:  57% (1065/1867)
Receiving objects:  58% (1083/1867)
Receiving objects:  59% (1102/1867)
Receiving objects:  60% (1121/1867)
Receiving objects:  61% (1139/1867)
Receiving objects:  62% (1158/1867)
Receiving objects:  63% (1177/1867)
Receiving objects:  64% (1195/1867)
Receiving objects:  65% (1214/1867)
Receiving objects:  66% (1233/1867)
Receiving objects:  67% (1251/1867)
Receiving objects:  68% (1270/1867)
Receiving objects:  69% (1289/1867)
Receiving objects:  70% (1307/1867)
Receiving objects:  71% (1326/1867)
Receiving objects:  72% (1345/1867)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Receiving objects:  73% (1363/1867)
Receiving objects:  74% (1382/1867)
Receiving objects:  75% (1401/1867)
Receiving objects:  76% (1419/1867)
Receiving objects:  77% (1438/1867)
Receiving objects:  78% (1457/1867)
Receiving objects:  79% (1475/1867)
Receiving objects:  80% (1494/1867)
Receiving objects:  81% (1513/1867)
Receiving objects:  82% (1531/1867)
Receiving objects:  83% (1550/1867)
Receiving objects:  84% (1569/1867)
Receiving objects:  85% (1587/1867)
Receiving objects:  86% (1606/1867)
Receiving objects:  87% (1625/1867)
Receiving objects:  88% (1643/1867)
Receiving objects:  89% (1662/1867)
Receiving objects:  90% (1681/1867)
Receiving objects:  91% (1699/1867)
Receiving objects:  92% (1718/1867)
Receiving objects:  93% (1737/1867)
Receiving objects:  94% (1755/1867)
Receiving objects:  95% (1774/1867)
Receiving objects:  96% (1793/1867)
Receiving objects:  97% (1811/1867)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Receiving objects:  98% (1830/1867)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Receiving objects:  99% (1849/1867)
remote: Total 1867 (delta 265), reused 330 (delta 177), pack-reused 1425 (from 1)
Receiving objects: 100% (1867/1867)
Receiving objects: 100% (1867/1867), 11.80 MiB | 39.87 MiB/s, done.
Resolving deltas:   0% (0/1087)
Resolving deltas:   1% (11/1087)
Resolving deltas:   2% (22/1087)
Resolving deltas:   3% (33/1087)
Resolving deltas:   4% (44/1087)
Resolving deltas:   5% (55/1087)
Resolving deltas:   6% (66/1087)
Resolving deltas:   7% (77/1087)
Resolving deltas:   8% (87/1087)
Resolving deltas:   9% (98/1087)
Resolving deltas:  10% (109/1087)
Resolving deltas:  11% (121/1087)
Resolving deltas:  12% (131/1087)
Resolving deltas:  13% (142/1087)
Resolving deltas:  14% (155/1087)
Resolving deltas:  15% (164/1087)
Resolving deltas:  16% (174/1087)
Resolving deltas:  17% (185/1087)
Resolving deltas:  18% (196/1087)
Resolving deltas:  19% (207/1087)
Resolving deltas:  20% (218/1087)
Resolving deltas:  21% (229/1087)
Resolving deltas:  22% (240/1087)
Resolving deltas:  23% (252/1087)
Resolving deltas:  24% (261/1087)
Resolving deltas:  25% (272/1087)
Resolving deltas:  26% (283/1087)
Resolving deltas:  27% (294/1087)
Resolving deltas:  28% (305/1087)
Resolving deltas:  29% (316/1087)
Resolving deltas:  30% (327/1087)
Resolving deltas:  31% (337/1087)
Resolving deltas:  32% (348/1087)
Resolving deltas:  33% (359/1087)
Resolving deltas:  34% (370/1087)
Resolving deltas:  35% (381/1087)
Resolving deltas:  36% (392/1087)
Resolving deltas:  37% (403/1087)
Resolving deltas:  38% (414/1087)
Resolving deltas:  39% (424/1087)
Resolving deltas:  40% (435/1087)
Resolving deltas:  41% (446/1087)
Resolving deltas:  42% (457/1087)
Resolving deltas:  43% (468/1087)
Resolving deltas:  44% (479/1087)
Resolving deltas:  45% (490/1087)
Resolving deltas:  46% (501/1087)
Resolving deltas:  47% (511/1087)
Resolving deltas:  48% (522/1087)
Resolving deltas:  49% (533/1087)
Resolving deltas:  50% (544/1087)
Resolving deltas:  51% (556/1087)
Resolving deltas:  52% (566/1087)
Resolving deltas:  53% (577/1087)
Resolving deltas:  54% (587/1087)
Resolving deltas:  55% (598/1087)
Resolving deltas:  56% (609/1087)
Resolving deltas:  57% (620/1087)
Resolving deltas:  58% (632/1087)
Resolving deltas:  59% (643/1087)
Resolving deltas:  60% (653/1087)
Resolving deltas:  61% (665/1087)
Resolving deltas:  62% (674/1087)
Resolving deltas:  63% (685/1087)
Resolving deltas:  64% (696/1087)
Resolving deltas:  65% (707/1087)
Resolving deltas:  66% (718/1087)
Resolving deltas:  67% (729/1087)
Resolving deltas:  68% (740/1087)
Resolving deltas:  69% (751/1087)
Resolving deltas:  70% (761/1087)
Resolving deltas:  71% (772/1087)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resolving deltas:  72% (783/1087)
Resolving deltas:  73% (794/1087)
Resolving deltas:  74% (805/1087)
Resolving deltas:  75% (816/1087)
Resolving deltas:  76% (827/1087)
Resolving deltas:  77% (837/1087)
Resolving deltas:  78% (848/1087)
Resolving deltas:  79% (859/1087)
Resolving deltas:  80% (870/1087)
Resolving deltas:  81% (881/1087)
Resolving deltas:  82% (892/1087)
Resolving deltas:  83% (904/1087)
Resolving deltas:  84% (914/1087)
Resolving deltas:  85% (924/1087)
Resolving deltas:  86% (935/1087)
Resolving deltas:  87% (946/1087)
Resolving deltas:  88% (957/1087)
Resolving deltas:  89% (968/1087)
Resolving deltas:  90% (979/1087)
Resolving deltas:  91% (990/1087)
Resolving deltas:  92% (1001/1087)
Resolving deltas:  93% (1012/1087)
Resolving deltas:  94% (1022/1087)
Resolving deltas:  95% (1033/1087)
Resolving deltas:  96% (1044/1087)
Resolving deltas:  97% (1055/1087)
Resolving deltas:  98% (1066/1087)
Resolving deltas:  99% (1077/1087)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resolving deltas: 100% (1087/1087)
Resolving deltas: 100% (1087/1087), done.
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="initialisation-of-parameters">
<h1>Initialisation of parameters<a class="headerlink" href="#initialisation-of-parameters" title="Link to this heading">#</a></h1>
<p>To start the initialisation of the optimisation that we are going to perform  there are a two parameters that require a definition as these are designer choices.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="c1"># sys.path.append(&quot;/content/tuduam&quot;)</span>
<span class="c1"># os.chdir(&quot;/content/tuduam&quot;)</span>
<span class="kn">import</span> <span class="nn">tuduam</span>
<span class="c1"># import importlib</span>
<span class="c1"># importlib.reload(tuduam)  # Force reload of the module</span>
<span class="kn">from</span> <span class="nn">tuduam.data_structures</span> <span class="kn">import</span> <span class="n">Wingbox</span><span class="p">,</span> <span class="n">Material</span>




<span class="n">attr_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;n_cell&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;spar_loc_nondim&quot;</span><span class="p">:[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">],</span>
    <span class="s2">&quot;str_cell&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">mat_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span><span class="mf">3e9</span><span class="p">,</span>
        <span class="s2">&quot;shear_modulus&quot;</span><span class="p">:</span><span class="mf">80e9</span><span class="p">,</span>
        <span class="s2">&quot;safety_factor&quot;</span><span class="p">:</span><span class="mf">1.5</span><span class="p">,</span>
        <span class="s2">&quot;load_factor&quot;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="s2">&quot;poisson&quot;</span><span class="p">:</span><span class="mf">0.3</span><span class="p">,</span>
        <span class="s2">&quot;density&quot;</span><span class="p">:</span><span class="mi">1600</span><span class="p">,</span>
        <span class="s2">&quot;beta_crippling&quot;</span><span class="p">:</span><span class="mf">1.42</span><span class="p">,</span>
        <span class="s2">&quot;sigma_ultimate&quot;</span><span class="p">:</span><span class="mf">407000000.0</span><span class="p">,</span>
        <span class="s2">&quot;sigma_yield&quot;</span><span class="p">:</span><span class="mf">407000000.0</span><span class="p">,</span>
        <span class="s2">&quot;g_crippling&quot;</span><span class="p">:</span><span class="mi">5</span>
    <span class="p">}</span>

<span class="n">mat_struct</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="o">**</span><span class="n">mat_dict</span><span class="p">)</span>
<span class="n">wingbox_struct</span> <span class="o">=</span> <span class="n">Wingbox</span><span class="p">(</span><span class="o">**</span><span class="n">attr_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Having this definitnon we can now start the optimization. Before continuing it is probably useful to first take a look through the API documentation for the class and its methods that we will be using. The class that we will be using is <code class="docutils literal notranslate"><span class="pre">SectionOpt</span></code> which is situated in the <code class="docutils literal notranslate"><span class="pre">structures</span></code>subpackage in tuduam. The link to the <a class="reference external" href="https://saullocastro.github.io/tuduam/optimization.html#tuduam.structures.optimization.SectionOpt">API docs</a> can be found here.</p>
<p>Before iterating for an entire wing, let us first do an example for a single section. We’ll take a section of the wing where the mean chord, <span class="math notranslate nohighlight">\(\bar{c} = 2\)</span> and the length of this section <span class="math notranslate nohighlight">\(b = 1.2\)</span>. For the airfoil, we’ll use th NACA 4412. For the amount of cells and spar locations we’ll use the previously defined values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tuduam.structures</span> <span class="kn">import</span> <span class="n">SectionOpt</span>
<span class="kn">import</span> <span class="nn">os</span>


<span class="n">chord</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># Chord length</span>
<span class="n">coord_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">),</span> <span class="s1">&#39;tuduam&#39;</span><span class="p">,</span>  <span class="s1">&#39;examples&#39;</span><span class="p">,</span> <span class="s1">&#39;naca_4412.txt&#39;</span><span class="p">))</span> <span class="c1"># Path to airfoil coordinates</span>
<span class="n">len_sec</span> <span class="o">=</span> <span class="mf">.2</span> <span class="c1"># Lenght of the section</span>

<span class="n">opt_obj</span> <span class="o">=</span> <span class="n">SectionOpt</span><span class="p">(</span><span class="n">coord_path</span><span class="p">,</span> <span class="n">chord</span><span class="p">,</span> <span class="n">len_sec</span><span class="p">,</span> <span class="n">wingbox_struct</span><span class="p">,</span> <span class="n">mat_struct</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Remember figure 2 which portrayed the top view of the optimization loop. Let us start at the core, i.e the optimization that is run for a fixed amount of stringers. For us these stringers were defined <code class="docutils literal notranslate"><span class="pre">wingbox_struct</span></code>. This optimization in the library is defined in the method <code class="docutils literal notranslate"><span class="pre">GA_optimize</span></code>, here you can find the <a class="reference external" href="https://saullocastro.github.io/tuduam/optimization.html#tuduam.structures.optimization.SectionOpt.GA_optimize">specifics</a>.</p>
<p>Let’s run the optimization below with some typical values for the loads! Also note that we specify the upper and lower boundsFeel free to alter them and watch the design change.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">shear_y</span> <span class="o">=</span> <span class="mf">30e3</span>
<span class="n">shear_x</span> <span class="o">=</span> <span class="mi">15000</span>
<span class="n">moment_y</span> <span class="o">=</span> <span class="mf">4e2</span>
<span class="n">moment_x</span> <span class="o">=</span> <span class="mf">30e3</span>
<span class="n">applied_loc</span> <span class="o">=</span> <span class="mf">0.45</span>
<span class="n">opt</span> <span class="o">=</span> <span class="n">SectionOpt</span><span class="p">(</span><span class="n">coord_path</span><span class="p">,</span> <span class="n">chord</span><span class="p">,</span> <span class="n">len_sec</span><span class="p">,</span> <span class="n">wingbox_struct</span><span class="p">,</span> <span class="n">mat_struct</span><span class="p">)</span>

<span class="n">upper_bnds</span> <span class="o">=</span> <span class="mi">8</span><span class="o">*</span><span class="p">[</span><span class="mf">0.012</span><span class="p">]</span>
<span class="n">lower_bnds</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="p">[</span><span class="mf">0.0001</span><span class="p">]</span> <span class="o">+</span>  <span class="p">[</span><span class="mf">0.003</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="p">[</span><span class="mf">0.003</span><span class="p">]</span>
<span class="n">res</span> <span class="o">=</span>  <span class="n">opt</span><span class="o">.</span><span class="n">GA_optimize</span><span class="p">(</span><span class="n">shear_y</span><span class="p">,</span> <span class="n">shear_x</span><span class="p">,</span> <span class="n">moment_y</span><span class="p">,</span> <span class="n">moment_x</span><span class="p">,</span> <span class="n">applied_loc</span><span class="p">,</span> <span class="n">upper_bnds</span><span class="p">,</span> <span class="n">lower_bnds</span><span class="p">,</span> <span class="n">pop</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">n_gen</span><span class="o">=</span> <span class="mi">60</span><span class="p">,</span><span class="n">multiprocess</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">======== Results ==========&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skin thickness = </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span><span class="o">*</span><span class="mi">1000</span><span class="si">}</span><span class="s2"> mm&quot;</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Spar thickness = </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="mi">1000</span><span class="si">}</span><span class="s2"> mm&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stringer thickness = </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span><span class="mi">1000</span><span class="si">}</span><span class="s2"> mm&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stringer  width= </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">*</span><span class="mi">1000</span><span class="si">}</span><span class="s2"> mm&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stringer height = </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">*</span><span class="mi">1000</span><span class="si">}</span><span class="s2"> mm&quot;</span><span class="p">)</span>

<span class="c1"># res =  opt_obj.full_section_opt(, pop=100, pop_full= 10, n_gen= 5 ,n_gen_full= 2)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:331: UserWarning: The thickness of stringer is larger than than the height of the stringer perhaps resulting in a negative area.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:331: UserWarning: The thickness of stringer is larger than than the height of the stringer perhaps resulting in a negative area.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:331: UserWarning: The thickness of stringer is larger than than the height of the stringer perhaps resulting in a negative area.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:334: UserWarning: The thickness of stringer is larger than than the width of the stringer resulting in nonsensical geometries.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:334: UserWarning: The thickness of stringer is larger than than the width of the stringer resulting in nonsensical geometries.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:339: UserWarning: The stringer area is negative, please see previous error
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:339: UserWarning: The stringer area is negative, please see previous error
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/constraints.py:437: RuntimeWarning: invalid value encountered in scalar power
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/constraints.py:437: RuntimeWarning: invalid value encountered in scalar power
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:334: UserWarning: The thickness of stringer is larger than than the width of the stringer resulting in nonsensical geometries.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:331: UserWarning: The thickness of stringer is larger than than the height of the stringer perhaps resulting in a negative area.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:334: UserWarning: The thickness of stringer is larger than than the width of the stringer resulting in nonsensical geometries.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:339: UserWarning: The stringer area is negative, please see previous error
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:635: UserWarning: Negative boom areas encountered this is currently a bug, temporary fix takes the absolute value
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/constraints.py:437: RuntimeWarning: invalid value encountered in scalar power
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:339: UserWarning: The stringer area is negative, please see previous error
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/constraints.py:437: RuntimeWarning: invalid value encountered in scalar power
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:635: UserWarning: Negative boom areas encountered this is currently a bug, temporary fix takes the absolute value
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:1389: UserWarning: 9 was not an even number and will be floored for conservative reasons
/opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:1389: UserWarning: 7 was not an even number and will be floored for conservative reasons
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>=================================================================================
n_gen  |  n_eval  |     cv_min    |     cv_avg    |     f_avg     |     f_min    
=================================================================================
     1 |       20 |           nan |           nan |             - |             -
     2 |       40 |  5.892335E+05 |  2.586893E+06 |             - |             -
     3 |       60 |  1.597098E+04 |  8.828549E+05 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     4 |       80 |  1.475767E+04 |  4.876832E+05 |             - |             -
     5 |      100 |  1.572664E+02 |  2.307658E+05 |             - |             -
     6 |      120 |  1.330916E+02 |  1.778502E+04 |             - |             -
     7 |      140 |  8.390189E+01 |  3.090627E+02 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     8 |      160 |  4.823260E+01 |  1.332849E+02 |             - |             -
     9 |      180 |  2.876452E+01 |  1.026962E+02 |             - |             -
    10 |      200 |  2.354275E+01 |  6.086254E+01 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    11 |      220 |  1.767519E+01 |  3.868588E+01 |             - |             -
    12 |      240 |  1.767519E+01 |  2.547644E+01 |             - |             -
    13 |      260 |  1.457934E+01 |  2.154567E+01 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    14 |      280 |  1.457934E+01 |  1.884780E+01 |             - |             -
    15 |      300 |  7.3260777168 |  1.565098E+01 |             - |             -
    16 |      320 |  5.5390067387 |  1.291093E+01 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    17 |      340 |  5.5214687616 |  9.3546616528 |             - |             -
    18 |      360 |  5.3663213535 |  6.5134697471 |             - |             -
    19 |      380 |  5.1252980579 |  5.4626972814 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    20 |      400 |  2.7705223748 |  5.1812955117 |             - |             -
    21 |      420 |  1.8802673609 |  4.4893896406 |             - |             -
    22 |      440 |  0.8128057312 |  3.1804604891 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    23 |      460 |  0.7976215623 |  2.0264520478 |             - |             -
    24 |      480 |  0.3837283234 |  1.1931978843 |             - |             -
    25 |      500 |  0.3453816585 |  0.7119007667 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    26 |      520 |  0.0047099656 |  0.5012213253 |             - |             -
    27 |      540 |  0.0047099656 |  0.2679410870 |             - |             -
    28 |      560 |  0.0042659691 |  0.1118058332 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    29 |      580 |  0.0042659691 |  0.0059999780 |             - |             -
    30 |      600 |  0.0038944594 |  0.0045613230 |             - |             -
    31 |      620 |  0.0034608084 |  0.0043678042 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    32 |      640 |  0.0026648398 |  0.0039910481 |             - |             -
    33 |      660 |  0.0023822746 |  0.0034588027 |             - |             -
    34 |      680 |  0.0014011219 |  0.0029460993 |             - |             -
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    35 |      700 |  0.000000E+00 |  0.0022065751 |  0.0429117122 |  0.0429117122
    36 |      720 |  0.000000E+00 |  0.0014997832 |  0.0430613629 |  0.0429117122
    37 |      740 |  0.000000E+00 |  0.0008837850 |  0.0428172072 |  0.0413998642
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    38 |      760 |  0.000000E+00 |  0.0000371314 |  0.0427315086 |  0.0411576838
    39 |      780 |  0.000000E+00 |  0.000000E+00 |  0.0422681761 |  0.0410578780
    40 |      800 |  0.000000E+00 |  0.000000E+00 |  0.0415369764 |  0.0409264512
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    41 |      820 |  0.000000E+00 |  0.000000E+00 |  0.0411469917 |  0.0405330817
    42 |      840 |  0.000000E+00 |  0.000000E+00 |  0.0409429253 |  0.0404786924
    43 |      860 |  0.000000E+00 |  0.000000E+00 |  0.0406877301 |  0.0397829212
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    44 |      880 |  0.000000E+00 |  0.000000E+00 |  0.0405264004 |  0.0397829212
    45 |      900 |  0.000000E+00 |  0.000000E+00 |  0.0403892590 |  0.0397829212
    46 |      920 |  0.000000E+00 |  0.000000E+00 |  0.0402376947 |  0.0391904389
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    47 |      940 |  0.000000E+00 |  0.000000E+00 |  0.0399770525 |  0.0388116677
    48 |      960 |  0.000000E+00 |  0.000000E+00 |  0.0395450563 |  0.0387084247
    49 |      980 |  0.000000E+00 |  0.000000E+00 |  0.0390217266 |  0.0383586854
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    50 |     1000 |  0.000000E+00 |  0.000000E+00 |  0.0387678747 |  0.0383586854
    51 |     1020 |  0.000000E+00 |  0.000000E+00 |  0.0386958158 |  0.0383561457
    52 |     1040 |  0.000000E+00 |  0.000000E+00 |  0.0385594842 |  0.0381963505
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    53 |     1060 |  0.000000E+00 |  0.000000E+00 |  0.0383947490 |  0.0381682142
    54 |     1080 |  0.000000E+00 |  0.000000E+00 |  0.0382808392 |  0.0381682142
    55 |     1100 |  0.000000E+00 |  0.000000E+00 |  0.0381951416 |  0.0380180272
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    56 |     1120 |  0.000000E+00 |  0.000000E+00 |  0.0381173639 |  0.0378847512
    57 |     1140 |  0.000000E+00 |  0.000000E+00 |  0.0380221608 |  0.0378824289
    58 |     1160 |  0.000000E+00 |  0.000000E+00 |  0.0379554328 |  0.0378442887
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    59 |     1180 |  0.000000E+00 |  0.000000E+00 |  0.0378859941 |  0.0377812016
    60 |     1200 |  0.000000E+00 |  0.000000E+00 |  0.0378435873 |  0.0377159718


======== Results ==========
Skin thickness = [6.38311823 6.59095961 6.03707018 4.61159371] mm
Spar thickness = 4.996795247355678 mm
Stringer thickness = 4.2038652157530505 mm
Stringer  width= 5.7953735714898995 mm
Stringer height = 9.85470647635964 mm
</pre></div>
</div>
</div>
</div>
<p>We can also get to know more about the history of each iteration through the <code class="docutils literal notranslate"><span class="pre">res</span></code> variable which is an instance of the <code class="docutils literal notranslate"><span class="pre">pymoo.core.result.Result</span></code>class. In this class the objective functions is described with <code class="docutils literal notranslate"><span class="pre">F</span></code> and the design vector with <code class="docutils literal notranslate"><span class="pre">X</span></code>. The object contains the history of each generation which we can access like shown below where we access the first generation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">gen</span><span class="o">.</span><span class="n">pop</span> <span class="k">for</span> <span class="n">gen</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">history</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generation 1</span><span class="se">\n</span><span class="s2">t_sk_cell1 - t_sk_cell2 - t_sk_cell3 - t_sk_cell4 - t_sp -  t_st - w_st - h_st&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;=====================================================================</span><span class="se">\n\n</span><span class="s2"> </span><span class="si">{</span><span class="n">pop_lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Generation 1
t_sk_cell1 - t_sk_cell2 - t_sk_cell3 - t_sk_cell4 - t_sp -  t_st - w_st - h_st
=====================================================================

 [[0.00506256 0.00867186 0.00010136 0.00369776 0.0043208  0.00201572
  0.00467634 0.00611005]
 [0.00482153 0.00651192 0.00508841 0.00825411 0.00484007 0.01065929
  0.00324649 0.00903421]
 [0.00506593 0.00674841 0.0017706  0.00245741 0.0102067  0.01165088
  0.00582082 0.0092309 ]
 [0.01052903 0.01074582 0.00111203 0.00056475 0.00452847 0.01065957
  0.00388512 0.00678997]
 [0.01149889 0.00644467 0.00833334 0.00385464 0.00917851 0.01018088
  0.00316459 0.0097513 ]
 [0.01186745 0.00900317 0.00343728 0.00949242 0.00392903 0.00592683
  0.01117736 0.00564253]
 [0.00352453 0.00164734 0.00033047 0.00817814 0.00490465 0.00392101
  0.00742416 0.00348026]
 [0.006932   0.00184607 0.00711274 0.00842712 0.00392101 0.00555462
  0.0092496  0.00672761]
 [0.00069445 0.00647717 0.00799916 0.00622718 0.01150135 0.00745211
  0.01113062 0.00423727]
 [0.00175739 0.00970796 0.00483235 0.00206771 0.01134758 0.00482542
  0.00975731 0.00953398]
 [0.01061134 0.0075217  0.00903621 0.00425189 0.00542935 0.01085475
  0.00685282 0.01168356]
 [0.00799495 0.00749818 0.00146548 0.01139892 0.00704921 0.00736229
  0.00667323 0.00513324]
 [0.01085022 0.00692679 0.00013416 0.00744402 0.0059398  0.00679764
  0.01097348 0.00621543]
 [0.01091157 0.00751799 0.00028827 0.0111603  0.00921807 0.01197055
  0.00455106 0.00423422]
 [0.01119789 0.00839214 0.0008854  0.00909001 0.00978489 0.01115327
  0.00940372 0.00411844]
 [0.00033657 0.00041191 0.00043685 0.00302991 0.01074025 0.00692714
  0.0079754  0.01057828]
 [0.00157766 0.00342229 0.00707054 0.01163819 0.00804927 0.00120512
  0.01020569 0.00509677]
 [0.00970455 0.00471554 0.01037615 0.00899075 0.00800616 0.00250101
  0.00353926 0.00409209]
 [0.00063017 0.00137918 0.00278594 0.00858457 0.00803745 0.00113812
  0.00364777 0.01170549]
 [0.0068604  0.00251919 0.00310268 0.00895153 0.00475887 0.00739495
  0.01173018 0.01062146]]
</pre></div>
</div>
</div>
</div>
<p>We can also plot the average value of variables over time and optimization function over time, this gives us an idea of how the variables effect the design. Run the code below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">t_sk_cell1_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
<span class="n">t_sk_cell2_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
<span class="n">t_sk_cell3_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">2</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
<span class="n">t_sk_cell4_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">3</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
<span class="n">t_sp_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">4</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
<span class="n">t_st_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">5</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
<span class="n">w_st_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">6</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
<span class="n">h_st__lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">7</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>

<span class="n">f_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mf">18.5</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sk_cell1_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sk cell 1&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sk_cell2_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sk cell 2&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sk_cell3_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sk cell 3&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sk_cell4_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sk cell 4&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sp_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sp&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_st_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T st&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">w_st_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;W st&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">h_st__lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;H st&quot;</span><span class="p">)</span>

<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">f_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Weight&quot;</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Average value of variables over time&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Average value of the optimization function over time&quot;</span><span class="p">)</span>


<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Generation&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Generation&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Thickness (mm)&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/524ff4a0dc8fb924801cdf1ece2254a5eac07d2d157853ed22816e8fb01fb5d3.png" src="../_images/524ff4a0dc8fb924801cdf1ece2254a5eac07d2d157853ed22816e8fb01fb5d3.png" />
</div>
</div>
<p>As you can see, it gets quite messy with all variables in there. One could also argue the information gets lost when taking the average and only plotting the optimum solution would give a better idea. It is left up to the reader to implement this.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="changing-the-amount-of-stringers">
<h1>Changing the amount of stringers<a class="headerlink" href="#changing-the-amount-of-stringers" title="Link to this heading">#</a></h1>
<p>In the previous optimization we only optimized for the various thicknesses, however a better solution would be possible when different configuration of stringers are used, or even a different layout of ribs.</p>
<p><code class="docutils literal notranslate"><span class="pre">TUDuam</span></code> also provides a method for optimizing for different stringer configuration. This is the outer optimization loop as has been shown earlier in this notebook in figure 2. The API documentation for this functionality can be found <a class="reference external" href="https://saullocastro.github.io/tuduam/optimization.html#tuduam.structures.optimization.SectionOpt.full_section_opt">here</a>. <code class="docutils literal notranslate"><span class="pre">SectionOpt.full_section_opt</span></code> interally also used the optimization which we experimented with previously. However, it calls this function for every stringer configuration, hence it is signficantly more computationally expensive.</p>
<p>Additionally, stringers often run along multiple sections and hence we’re not completely free in the amount of stringer in each section.</p>
<p>The method does come with a <code class="docutils literal notranslate"><span class="pre">multiprocess</span></code> flag which does allow it to see major performance boosts on more powerful platforms. So feel free to give it a try on your local machine. The setup is very similar to <code class="docutils literal notranslate"><span class="pre">GA_optimize</span></code>.</p>
<p>Unlike for the stringer configuration, this repository does <strong>not</strong> implememt an optimization of the spanwise rib distribution.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="example-optimizing-the-wing-of-a-cessna-172r">
<h1>Example: Optimizing the wing of a Cessna 172R<a class="headerlink" href="#example-optimizing-the-wing-of-a-cessna-172r" title="Link to this heading">#</a></h1>
<p>Let us do an example of how we would design the structure of a complete wing. To keep it computationally bounded we are assuming a 3 cell wingbox with a fixed stringer distribution of 10 stringers per cell. Furthermore, here is some important data on the Cessna 172</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Characteristic</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Wingspan</p></td>
<td><p>11 m</p></td>
</tr>
<tr class="row-odd"><td><p>Aspect ratio</p></td>
<td><p>7.32</p></td>
</tr>
<tr class="row-even"><td><p>Surface Area</p></td>
<td><p>16.2 <span class="math notranslate nohighlight">\(m^2\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Gross weight</p></td>
<td><p>1110 kg</p></td>
</tr>
</tbody>
</table>
<p>To come up with the correct loading per bay we make some oversimplified assumptions to make our life easier for this notebook.</p>
<section id="assumptions">
<h2>Assumptions<a class="headerlink" href="#assumptions" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Constant spanwise drag distribution of 230 N/m</p></li>
<li><p>Therefore a linear <code class="docutils literal notranslate"><span class="pre">My</span></code>distribution (see below)</p></li>
<li><p>A linear lift distribution which is maximum at the root of the wing.</p></li>
<li><p>Hence, a cubic <code class="docutils literal notranslate"><span class="pre">Mx</span></code> distribution</p></li>
<li><p>Ignoring the weight of the wing (conservative)</p></li>
</ol>
<!-- A small diagram of the internal force diagram is shown below.

 ![Figure sign convention](https://github.com/saullocastro/tuduam/blob/main/doc/_static/sign_convention_forces.png?raw=true)

 Let us now make the functions to get our distribution -->
<p>The functions below will be used to get the correct internal forces for each rib section, as can be inferred from <code class="docutils literal notranslate"><span class="pre">average_fun</span></code> we assume a constant force over each section. This constant force is taken to be the average value over the entire section.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.integrate</span> <span class="kn">import</span> <span class="n">quad</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">average_fun</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span>
                <span class="n">x_start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                <span class="n">x_end</span><span class="p">:</span> <span class="nb">float</span>
                <span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the average value of a function `func` over the interval [a, b].</span>

<span class="sd">    Parameters:</span>
<span class="sd">    func (function): A function that takes a float and returns a float.</span>
<span class="sd">    a (float): Lower bound of the interval.</span>
<span class="sd">    b (float): Upper bound of the interval.</span>

<span class="sd">    Returns:</span>
<span class="sd">    float: The average value of the function over [a, b].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">val</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">quad</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x_start</span><span class="p">,</span> <span class="n">x_end</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">val</span> <span class="o">/</span> <span class="p">(</span><span class="n">x_end</span> <span class="o">-</span> <span class="n">x_start</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">shear_y</span><span class="p">(</span><span class="n">span</span><span class="p">):</span>
  <span class="k">return</span> <span class="mi">5444</span> <span class="o">-</span> <span class="n">quad</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1979</span> <span class="o">-</span> <span class="mi">1979</span><span class="o">/</span><span class="mf">5.5</span><span class="o">*</span><span class="n">x</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="n">span</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">moment_y</span><span class="p">(</span><span class="n">span</span><span class="p">):</span>
  <span class="k">return</span> <span class="o">-</span><span class="mi">9980</span> <span class="o">+</span> <span class="n">quad</span><span class="p">(</span><span class="n">shear_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">span</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">shear_x</span><span class="p">(</span><span class="n">span</span><span class="p">):</span>
  <span class="k">return</span> <span class="o">-</span><span class="mi">1265</span> <span class="o">+</span> <span class="mi">230</span><span class="o">*</span><span class="n">span</span>

<span class="k">def</span> <span class="nf">moment_x</span><span class="p">(</span><span class="n">span</span><span class="p">):</span>
  <span class="k">return</span> <span class="mf">3478.75</span> <span class="o">+</span> <span class="n">quad</span><span class="p">(</span><span class="n">shear_x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">span</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># print(average_fun(moment_x, 5, 5.5))</span>
<span class="c1"># print(moment_y(3))</span>

<span class="c1"># x = np.linspace(0,5.5,1000)</span>
<span class="c1"># y = np.vectorize(moment_x)(x)</span>
<span class="c1"># plt.plot(x,y)</span>
<span class="c1"># plt.show()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="creating-the-section">
<h1>Creating the section<a class="headerlink" href="#creating-the-section" title="Link to this heading">#</a></h1>
<p>We must now create the section to iterate over. See the code below whwere we create the rib locations. You can change the exponent of the <code class="docutils literal notranslate"><span class="pre">slicer</span></code> variable to alter the distribution of the rib locations</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="n">span</span> <span class="o">=</span> <span class="mf">5.5</span>
<span class="n">S</span> <span class="o">=</span> <span class="mf">16.2</span>
<span class="n">n_sec</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">chord</span> <span class="o">=</span> <span class="n">S</span><span class="o">/</span><span class="n">span</span>
<span class="n">slicer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_sec</span><span class="p">)</span><span class="o">**</span><span class="mf">1.6</span>
<span class="n">rib_loc</span> <span class="o">=</span> <span class="n">slicer</span><span class="o">*</span><span class="n">span</span>

<span class="nb">print</span><span class="p">(</span><span class="n">rib_loc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.         0.24445888 0.74106076 1.41775058 2.24647615 3.21039028
 4.29781608 5.5       ]
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="iterating-over-each-section">
<h1>Iterating over each section<a class="headerlink" href="#iterating-over-each-section" title="Link to this heading">#</a></h1>
<p>With the rib locations and loads specified we can iterate over all the sections. Please see the code below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tuduam.data_structures</span> <span class="kn">import</span> <span class="n">Wingbox</span><span class="p">,</span> <span class="n">Material</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="n">res_lst</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">rib_1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rib_loc</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">rib_loc</span><span class="p">):</span>
    <span class="k">break</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">rib_2</span> <span class="o">=</span> <span class="n">rib_loc</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>

  <span class="n">attr_dict</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s2">&quot;n_cell&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
      <span class="s2">&quot;spar_loc_nondim&quot;</span><span class="p">:[</span><span class="mf">0.3</span><span class="p">,</span>  <span class="mf">0.7</span><span class="p">],</span>
      <span class="s2">&quot;str_cell&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="n">wingbox_struct</span> <span class="o">=</span> <span class="n">Wingbox</span><span class="p">(</span><span class="o">**</span><span class="n">attr_dict</span><span class="p">)</span>

  <span class="n">shear_y_sec</span> <span class="o">=</span> <span class="n">average_fun</span><span class="p">(</span><span class="n">shear_y</span><span class="p">,</span> <span class="n">rib_1</span><span class="p">,</span> <span class="n">rib_2</span><span class="p">)</span>
  <span class="n">shear_x_sec</span> <span class="o">=</span> <span class="n">average_fun</span><span class="p">(</span><span class="n">shear_x</span><span class="p">,</span> <span class="n">rib_1</span><span class="p">,</span> <span class="n">rib_2</span><span class="p">)</span>
  <span class="n">moment_y_sec</span> <span class="o">=</span> <span class="n">average_fun</span><span class="p">(</span><span class="n">moment_y</span><span class="p">,</span> <span class="n">rib_1</span><span class="p">,</span> <span class="n">rib_2</span><span class="p">)</span>
  <span class="n">moment_x_sec</span> <span class="o">=</span> <span class="n">average_fun</span><span class="p">(</span><span class="n">moment_x</span><span class="p">,</span> <span class="n">rib_1</span><span class="p">,</span> <span class="n">rib_2</span><span class="p">)</span>

  <span class="n">applied_loc</span> <span class="o">=</span> <span class="mf">0.45</span>
  <span class="n">opt</span> <span class="o">=</span> <span class="n">SectionOpt</span><span class="p">(</span><span class="n">coord_path</span><span class="p">,</span> <span class="n">chord</span><span class="p">,</span> <span class="n">len_sec</span><span class="p">,</span> <span class="n">wingbox_struct</span><span class="p">,</span> <span class="n">mat_struct</span><span class="p">)</span>

  <span class="n">upper_bnds</span> <span class="o">=</span> <span class="mi">7</span><span class="o">*</span><span class="p">[</span><span class="mf">0.012</span><span class="p">]</span>
  <span class="n">lower_bnds</span> <span class="o">=</span> <span class="mi">3</span><span class="o">*</span><span class="p">[</span><span class="mf">0.0001</span><span class="p">]</span> <span class="o">+</span>  <span class="p">[</span><span class="mf">0.003</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="p">[</span><span class="mf">0.003</span><span class="p">]</span>
  <span class="n">res</span> <span class="o">=</span>  <span class="n">opt</span><span class="o">.</span><span class="n">GA_optimize</span><span class="p">(</span><span class="n">shear_y_sec</span><span class="p">,</span> <span class="n">shear_x_sec</span><span class="p">,</span> <span class="n">moment_y_sec</span><span class="p">,</span> <span class="n">moment_x_sec</span><span class="p">,</span> <span class="n">applied_loc</span><span class="p">,</span> <span class="n">upper_bnds</span><span class="p">,</span> <span class="n">lower_bnds</span><span class="p">,</span> <span class="n">pop</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">n_gen</span><span class="o">=</span> <span class="mi">60</span><span class="p">,</span><span class="n">multiprocess</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
  <span class="n">res_lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">======== Results rib section </span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2"> rib </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">rib_1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">rib_2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> ==========&quot;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skin thickness = </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> mm&quot;</span> <span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Spar thickness = </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> mm&quot;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stringer thickness = </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> mm&quot;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stringer  width= </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> mm&quot;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Stringer height = </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> mm&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>======== Results rib section 1 rib 0.0 to 0.24 ==========
Skin thickness = [2.75 2.93 2.47] mm
Spar thickness = 5.88 mm
Stringer thickness = 8.64 mm
Stringer  width= 9.64 mm
Stringer height = 8.75 mm
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>======== Results rib section 2 rib 0.24 to 0.74 ==========
Skin thickness = [2.67 2.86 2.33] mm
Spar thickness = 3.08 mm
Stringer thickness = 6.61 mm
Stringer  width= 6.66 mm
Stringer height = 8.77 mm
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>======== Results rib section 3 rib 0.74 to 1.42 ==========
Skin thickness = [2.56 2.6  2.07] mm
Spar thickness = 4.44 mm
Stringer thickness = 7.73 mm
Stringer  width= 7.73 mm
Stringer height = 7.98 mm
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>======== Results rib section 4 rib 1.42 to 2.25 ==========
Skin thickness = [2.35 2.3  1.78] mm
Spar thickness = 5.04 mm
Stringer thickness = 1.65 mm
Stringer  width= 7.4 mm
Stringer height = 10.19 mm
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="n">line</span> <span class="mi">31</span>
<span class="g g-Whitespace">     </span><span class="mi">29</span> <span class="n">upper_bnds</span> <span class="o">=</span> <span class="mi">7</span><span class="o">*</span><span class="p">[</span><span class="mf">0.012</span><span class="p">]</span>
<span class="g g-Whitespace">     </span><span class="mi">30</span> <span class="n">lower_bnds</span> <span class="o">=</span> <span class="mi">3</span><span class="o">*</span><span class="p">[</span><span class="mf">0.0001</span><span class="p">]</span> <span class="o">+</span>  <span class="p">[</span><span class="mf">0.003</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="p">[</span><span class="mf">0.003</span><span class="p">]</span>
<span class="ne">---&gt; </span><span class="mi">31</span> <span class="n">res</span> <span class="o">=</span>  <span class="n">opt</span><span class="o">.</span><span class="n">GA_optimize</span><span class="p">(</span><span class="n">shear_y_sec</span><span class="p">,</span> <span class="n">shear_x_sec</span><span class="p">,</span> <span class="n">moment_y_sec</span><span class="p">,</span> <span class="n">moment_x_sec</span><span class="p">,</span> <span class="n">applied_loc</span><span class="p">,</span> <span class="n">upper_bnds</span><span class="p">,</span> <span class="n">lower_bnds</span><span class="p">,</span> <span class="n">pop</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">n_gen</span><span class="o">=</span> <span class="mi">60</span><span class="p">,</span><span class="n">multiprocess</span><span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">32</span> <span class="n">res_lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">======== Results rib section </span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2"> rib </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">rib_1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">rib_2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> ==========&quot;</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/optimization.py:630,</span> in <span class="ni">SectionOpt.GA_optimize</span><span class="nt">(self, shear_y, shear_x, moment_y, moment_x, applied_loc, upper_bnds, lower_bnds, n_gen, pop, verbose, seed, multiprocess, cores, save_hist)</span>
<span class="g g-Whitespace">    </span><span class="mi">614</span>     <span class="n">problem</span> <span class="o">=</span> <span class="n">ProblemFixedPanel</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">615</span>         <span class="n">shear_y</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">616</span>         <span class="n">shear_x</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">626</span>         <span class="bp">self</span><span class="o">.</span><span class="n">path_coord</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">627</span>     <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">629</span> <span class="n">method</span> <span class="o">=</span> <span class="n">GA</span><span class="p">(</span><span class="n">pop_size</span><span class="o">=</span><span class="n">pop</span><span class="p">,</span> <span class="n">eliminate_duplicates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">630</span> <span class="n">resGA</span> <span class="o">=</span> <span class="n">minimize</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">631</span>     <span class="n">problem</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">632</span>     <span class="n">method</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">633</span>     <span class="n">termination</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;n_gen&quot;</span><span class="p">,</span> <span class="n">n_gen</span><span class="p">),</span>
<span class="g g-Whitespace">    </span><span class="mi">634</span>     <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">635</span>     <span class="n">save_history</span><span class="o">=</span><span class="n">save_hist</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">636</span>     <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">637</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">638</span> <span class="k">return</span> <span class="n">resGA</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/optimize.py:67,</span> in <span class="ni">minimize</span><span class="nt">(problem, algorithm, termination, copy_algorithm, copy_termination, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">64</span>     <span class="n">algorithm</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">66</span> <span class="c1"># actually execute the algorithm</span>
<span class="ne">---&gt; </span><span class="mi">67</span> <span class="n">res</span> <span class="o">=</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">69</span> <span class="c1"># store the deep copied algorithm in the result object</span>
<span class="g g-Whitespace">     </span><span class="mi">70</span> <span class="n">res</span><span class="o">.</span><span class="n">algorithm</span> <span class="o">=</span> <span class="n">algorithm</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/algorithm.py:138,</span> in <span class="ni">Algorithm.run</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">137</span>     <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_next</span><span class="p">():</span>
<span class="ne">--&gt; </span><span class="mi">138</span>         <span class="bp">self</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">139</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/algorithm.py:158,</span> in <span class="ni">Algorithm.next</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">156</span> <span class="c1"># call the advance with them after evaluation</span>
<span class="g g-Whitespace">    </span><span class="mi">157</span> <span class="k">if</span> <span class="n">infills</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">158</span>     <span class="bp">self</span><span class="o">.</span><span class="n">evaluator</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">problem</span><span class="p">,</span> <span class="n">infills</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">159</span>     <span class="bp">self</span><span class="o">.</span><span class="n">advance</span><span class="p">(</span><span class="n">infills</span><span class="o">=</span><span class="n">infills</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">161</span> <span class="c1"># if the algorithm does not follow the infill-advance scheme just call advance</span>
<span class="g g-Whitespace">    </span><span class="mi">162</span> <span class="k">else</span><span class="p">:</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/evaluator.py:69,</span> in <span class="ni">Evaluator.eval</span><span class="nt">(self, problem, pop, skip_already_evaluated, evaluate_values_of, count_evals, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">65</span> <span class="c1"># evaluate the solutions (if there are any)</span>
<span class="g g-Whitespace">     </span><span class="mi">66</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">I</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">67</span> 
<span class="g g-Whitespace">     </span><span class="mi">68</span>     <span class="c1"># do the actual evaluation - call the sub-function to set the corresponding values to the population</span>
<span class="ne">---&gt; </span><span class="mi">69</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_eval</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">pop</span><span class="p">[</span><span class="n">I</span><span class="p">],</span> <span class="n">evaluate_values_of</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">71</span> <span class="c1"># update the function evaluation counter</span>
<span class="g g-Whitespace">     </span><span class="mi">72</span> <span class="k">if</span> <span class="n">count_evals</span><span class="p">:</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/evaluator.py:90,</span> in <span class="ni">Evaluator._eval</span><span class="nt">(self, problem, pop, evaluate_values_of, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">87</span> <span class="n">X</span> <span class="o">=</span> <span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">89</span> <span class="c1"># call the problem to evaluate the solutions</span>
<span class="ne">---&gt; </span><span class="mi">90</span> <span class="n">out</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">return_values_of</span><span class="o">=</span><span class="n">evaluate_values_of</span><span class="p">,</span> <span class="n">return_as_dictionary</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">92</span> <span class="c1"># for each of the attributes set it to the problem</span>
<span class="g g-Whitespace">     </span><span class="mi">93</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/problem.py:257,</span> in <span class="ni">Problem.evaluate</span><span class="nt">(self, X, return_values_of, return_as_dictionary, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">254</span>     <span class="n">only_single_value</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span>
<span class="g g-Whitespace">    </span><span class="mi">256</span> <span class="c1"># this is where the actual evaluation takes place</span>
<span class="ne">--&gt; </span><span class="mi">257</span> <span class="n">_out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">return_values_of</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">259</span> <span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>
<span class="g g-Whitespace">    </span><span class="mi">260</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="g g-Whitespace">    </span><span class="mi">261</span> 
<span class="g g-Whitespace">    </span><span class="mi">262</span>     <span class="c1"># copy it to a numpy array (it might be one of jax at this point)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/problem.py:297,</span> in <span class="ni">Problem.do</span><span class="nt">(self, X, return_values_of, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">295</span> <span class="c1"># do the function evaluation</span>
<span class="g g-Whitespace">    </span><span class="mi">296</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">297</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_elementwise</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">298</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">299</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_vectorized</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/problem.py:315,</span> in <span class="ni">Problem._evaluate_elementwise</span><span class="nt">(self, X, out, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">312</span> <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">314</span> <span class="c1"># execute the runner</span>
<span class="ne">--&gt; </span><span class="mi">315</span> <span class="n">elems</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise_runner</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">X</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">317</span> <span class="c1"># for each evaluation call</span>
<span class="g g-Whitespace">    </span><span class="mi">318</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">elems</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">319</span> 
<span class="g g-Whitespace">    </span><span class="mi">320</span>     <span class="c1"># for each key stored for this evaluation</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/problem.py:32,</span> in <span class="ni">LoopedElementwiseEvaluation.__call__</span><span class="nt">(self, f, X)</span>
<span class="g g-Whitespace">     </span><span class="mi">31</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">32</span>     <span class="k">return</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">X</span><span class="p">]</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/problem.py:32,</span> in <span class="ni">&lt;listcomp&gt;</span><span class="nt">(.0)</span>
<span class="g g-Whitespace">     </span><span class="mi">31</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">X</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">32</span>     <span class="k">return</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">X</span><span class="p">]</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/pymoo/core/problem.py:25,</span> in <span class="ni">ElementwiseEvaluationFunction.__call__</span><span class="nt">(self, x)</span>
<span class="g g-Whitespace">     </span><span class="mi">23</span> <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">24</span>     <span class="n">out</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="ne">---&gt; </span><span class="mi">25</span>     <span class="bp">self</span><span class="o">.</span><span class="n">problem</span><span class="o">.</span><span class="n">_evaluate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">26</span>     <span class="k">return</span> <span class="n">out</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/optimization.py:433,</span> in <span class="ni">ProblemFixedPanel._evaluate</span><span class="nt">(self, x, out, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">430</span> <span class="n">box_copy</span><span class="o">.</span><span class="n">load_new_gauge</span><span class="p">(</span><span class="n">t_sk_cell</span><span class="p">,</span> <span class="n">t_sp</span><span class="p">,</span> <span class="n">t_st</span><span class="p">,</span> <span class="n">w_st</span><span class="p">,</span> <span class="n">h_st</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">432</span> <span class="c1"># Perform stress analysis</span>
<span class="ne">--&gt; </span><span class="mi">433</span> <span class="n">box_copy</span><span class="o">.</span><span class="n">stress_analysis</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">434</span>     <span class="bp">self</span><span class="o">.</span><span class="n">shear_y</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">435</span>     <span class="bp">self</span><span class="o">.</span><span class="n">shear_x</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">436</span>     <span class="bp">self</span><span class="o">.</span><span class="n">moment_y</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">437</span>     <span class="bp">self</span><span class="o">.</span><span class="n">moment_x</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">438</span>     <span class="bp">self</span><span class="o">.</span><span class="n">applied_loc</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">439</span>     <span class="bp">self</span><span class="o">.</span><span class="n">mat_struct</span><span class="o">.</span><span class="n">shear_modulus</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">440</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">442</span> <span class="c1"># ================ Get constraints ======================================</span>
<span class="g g-Whitespace">    </span><span class="mi">443</span> <span class="n">constr_cls</span> <span class="o">=</span> <span class="n">IsotropicWingboxConstraints</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">444</span>     <span class="n">box_copy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mat_struct</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">len_sec</span>
<span class="g g-Whitespace">    </span><span class="mi">445</span> <span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/tuduam-2024.16-py3.11.egg/tuduam/structures/wingbox.py:1026,</span> in <span class="ni">IdealWingbox.stress_analysis</span><span class="nt">(self, shear_y, shear_x, moment_y, moment_x, shear_y_appl, shear_mod, validate)</span>
<span class="g g-Whitespace">   </span><span class="mi">1022</span> <span class="c1"># Else if  just add qs,n. As no other influece needs to be taken into account</span>
<span class="g g-Whitespace">   </span><span class="mi">1023</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1024</span>     <span class="c1"># Check if it was not the cut panel</span>
<span class="g g-Whitespace">   </span><span class="mi">1025</span>     <span class="k">if</span> <span class="n">pnl</span><span class="o">.</span><span class="n">q_basic</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span> 
<span class="ne">-&gt; </span><span class="mi">1026</span>         <span class="n">sign</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">r_rel_vec</span><span class="p">,</span> <span class="n">pnl</span><span class="o">.</span><span class="n">dir_vec</span><span class="p">))</span>
<span class="g g-Whitespace">   </span><span class="mi">1027</span>         <span class="n">pnl</span><span class="o">.</span><span class="n">q_tot</span>  <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">q_basic</span> <span class="o">+</span> <span class="n">sign</span><span class="o">*</span><span class="n">qs_lst</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">1028</span>         <span class="n">pnl</span><span class="o">.</span><span class="n">tau</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">q_tot</span><span class="o">/</span><span class="n">pnl</span><span class="o">.</span><span class="n">t_pnl</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/numpy/core/numeric.py:1591,</span> in <span class="ni">cross</span><span class="nt">(a, b, axisa, axisb, axisc, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1588</span> <span class="n">axisb</span> <span class="o">=</span> <span class="n">normalize_axis_index</span><span class="p">(</span><span class="n">axisb</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">ndim</span><span class="p">,</span> <span class="n">msg_prefix</span><span class="o">=</span><span class="s1">&#39;axisb&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1590</span> <span class="c1"># Move working axis to the end of the shape</span>
<span class="ne">-&gt; </span><span class="mi">1591</span> <span class="n">a</span> <span class="o">=</span> <span class="n">moveaxis</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axisa</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1592</span> <span class="n">b</span> <span class="o">=</span> <span class="n">moveaxis</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">axisb</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1593</span> <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;incompatible dimensions for cross product</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1594</span>        <span class="s2">&quot;(dimension must be 2 or 3)&quot;</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.11.9/x64/lib/python3.11/site-packages/numpy/core/numeric.py:1393,</span> in <span class="ni">moveaxis</span><span class="nt">(a, source, destination)</span>
<span class="g g-Whitespace">   </span><span class="mi">1389</span> <span class="k">def</span> <span class="nf">_moveaxis_dispatcher</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1390</span>     <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">,)</span>
<span class="ne">-&gt; </span><span class="mi">1393</span> <span class="nd">@array_function_dispatch</span><span class="p">(</span><span class="n">_moveaxis_dispatcher</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1394</span> <span class="k">def</span> <span class="nf">moveaxis</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1395</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1396</span><span class="sd">     Move axes of an array to new positions.</span>
<span class="g g-Whitespace">   </span><span class="mi">1397</span><span class="sd"> </span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">   </span><span class="mi">1440</span><span class="sd"> </span>
<span class="g g-Whitespace">   </span><span class="mi">1441</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1442</span>     <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1443</span>         <span class="c1"># allow duck-array types if they define transpose</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="viewing-the-results">
<h1>Viewing the results<a class="headerlink" href="#viewing-the-results" title="Link to this heading">#</a></h1>
<p>Above you have now seen the final result of each section. The history of each section as we have plotted previously, is also saved in the <code class="docutils literal notranslate"><span class="pre">res_lst</span></code> variable. The previous code we utilized is wrapped in a function below for easy access such that you can compare the the various sections. Now feel free to change the variables or use the API for your optimizations!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pymoo.core.result</span> <span class="kn">import</span> <span class="n">Result</span>


<span class="k">def</span> <span class="nf">plot_history</span><span class="p">(</span><span class="n">res</span><span class="p">:</span> <span class="n">Result</span><span class="p">):</span>
  <span class="n">pop_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">gen</span><span class="o">.</span><span class="n">pop</span> <span class="k">for</span> <span class="n">gen</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">history</span><span class="p">]</span>
  <span class="n">t_sk_cell1_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
  <span class="n">t_sk_cell2_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
  <span class="n">t_sk_cell3_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">2</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
  <span class="n">t_sk_cell4_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">3</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
  <span class="n">t_sp_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">4</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
  <span class="n">t_st_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">5</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
  <span class="n">w_st_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">6</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>
  <span class="n">h_st__lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">)[:][</span><span class="mi">7</span><span class="p">])</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>

  <span class="n">f_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">pop_lst</span><span class="p">]</span>

  <span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
  <span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mf">18.5</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">)</span>

  <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sk_cell1_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sk cell 1&quot;</span><span class="p">)</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sk_cell2_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sk cell 2&quot;</span><span class="p">)</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sk_cell3_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sk cell 3&quot;</span><span class="p">)</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sk_cell4_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sk cell 4&quot;</span><span class="p">)</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_sp_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T sp&quot;</span><span class="p">)</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_st_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;T st&quot;</span><span class="p">)</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">w_st_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;W st&quot;</span><span class="p">)</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">h_st__lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;H st&quot;</span><span class="p">)</span>

  <span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">f_lst</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Weight&quot;</span><span class="p">)</span>

  <span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Average value of variables over time&quot;</span><span class="p">)</span>
  <span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Average value of the optimization function over time&quot;</span><span class="p">)</span>


  <span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Generation&quot;</span><span class="p">)</span>
  <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Generation&quot;</span><span class="p">)</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Thickness (mm)&quot;</span><span class="p">)</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
  <span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
  <span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
  <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

  <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plot_history</span><span class="p">(</span><span class="n">res_lst</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/7e4cc15336e75f1e7505d8674f1a2765d27880c599e3ead103378796a06b1e56.png" src="../_images/7e4cc15336e75f1e7505d8674f1a2765d27880c599e3ead103378796a06b1e56.png" />
</div>
</div>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../structural_opt.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Structural Optimization</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Structural Optimization of a wingbox</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#laying-out-a-framework-for-a-full-wing-optimization">Laying out a framework for a full wing optimization</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#constraining-the-design">Constraining the design</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#buckling">Buckling</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#von-mises-failure-criterion">Von Mises failure Criterion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-constraints">Other constraints</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#leveraging-python-for-the-optimization">Leveraging Python for the optimization</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#initialisation-of-parameters">Initialisation of parameters</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-the-amount-of-stringers">Changing the amount of stringers</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#example-optimizing-the-wing-of-a-cessna-172r">Example: Optimizing the wing of a Cessna 172R</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions">Assumptions</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-section">Creating the section</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#iterating-over-each-section">Iterating over each section</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#viewing-the-results">Viewing the results</a></li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/notebooks/structural_optimization.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024-, Damien Keijzer,, Saullo G. P. Castro.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>